{"version":3,"sources":["../../src/middleware/validar-jwt.js"],"names":["secret","validarJwt","req","res","next","token","headers","user","auth","startsWith","slice","length","console","log","jwt","verify","error"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,MAAM,GAAG,WAAf;;AACO,MAAMC,UAAU,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC1C,MAAIC,KAAK,GAAG,EAAZ;AACAA,EAAAA,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAY,gBAAZ,KAAiCJ,GAAG,CAACI,OAAJ,CAAY,eAAZ,CAAzC,CAF0C,CAG3C;;AACC,MAAI,CAACD,KAAL,EAAY;AACRH,IAAAA,GAAG,CAACK,IAAJ,GAAW;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAX;AACA,WAAOJ,IAAI,EAAX;AACH;;AACD,MAAIC,KAAK,CAACI,UAAN,CAAiB,SAAjB,CAAJ,EAAiC;AAC7BJ,IAAAA,KAAK,GAAGA,KAAK,CAACK,KAAN,CAAY,CAAZ,EAAeL,KAAK,CAACM,MAArB,CAAR;AACH;;AACD,MAAI;AACA;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYC,sBAAIC,MAAJ,CAAWV,KAAX,EAAkBL,MAAlB,CAAZ,EAFA,CAGA;AACA;AACH,GALD,CAKE,OAAOgB,KAAP,EAAc;AACZd,IAAAA,GAAG,CAACK,IAAJ,GAAW;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAX;AACA,WAAOJ,IAAI,EAAX;AACH;AAEJ,CArBM","sourcesContent":["import jwt from \"jsonwebtoken\";\r\n\r\nconst secret = \"@mi_llave\";\r\nexport const validarJwt = (req, res, next) => {\r\n    let token = \"\";\r\n    token = req.headers[\"x-access-token\"] || req.headers[\"authorization\"];\r\n   // console.log(\"entro\")\r\n    if (!token) {\r\n        req.user = { auth: false }\r\n        return next();\r\n    }\r\n    if (token.startsWith(\"Bearer \")) {\r\n        token = token.slice(7, token.length);\r\n    }\r\n    try {\r\n        //const { uid, name_user, email } = jwt.verify(token, secret);\r\n        console.log(jwt.verify(token, secret));\r\n        //req.user = { auth: true, id: uid, name_user,  email };\r\n        //return next();\r\n    } catch (error) {\r\n        req.user = { auth: false }\r\n        return next();\r\n    }\r\n\r\n}"],"file":"validar-jwt.js"}